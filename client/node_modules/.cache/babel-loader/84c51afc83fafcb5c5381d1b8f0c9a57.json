{"ast":null,"code":"var _jsxFileName = \"F:\\\\INSTAGRAM CLONE\\\\client\\\\src\\\\components\\\\screens\\\\Card.js\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles'; // import clsx from 'clsx';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions'; // import Collapse from '@material-ui/core/Collapse';\n\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { red } from '@material-ui/core/colors';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport ShareIcon from '@material-ui/icons/Share'; // import ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n// import MoreVertIcon from '@material-ui/icons/MoreVert';\n\nimport ThumbUpIcon from '@material-ui/icons/ThumbUp';\nimport ThumbDownIcon from '@material-ui/icons/ThumbDown';\nimport { UserContext } from '../../App';\nimport Fab from '@material-ui/core/Fab';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { Link } from 'react-router-dom';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    maxWidth: 345,\n    margin: \"26px auto\"\n  },\n  media: {\n    height: 0,\n    paddingTop: '56.25%' // 16:9\n\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest\n    })\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)'\n  },\n  avatar: {\n    backgroundColor: red[500],\n    size: \"small\"\n  }\n}));\nexport default function RecipeReviewCard() {\n  const [data, setData] = useState([]);\n  const classes = useStyles();\n  const [expanded, setExpanded] = React.useState(false); // const [newData, setData] = useState(prop)\n\n  const {\n    state,\n    dispatch\n  } = useContext(UserContext); // console.log(prop)\n\n  const handleExpandClick = () => {\n    setExpanded(!expanded);\n  };\n\n  const likePost = id => {\n    fetch('/like', {\n      method: 'put',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        postid: id\n      })\n    }).then(res => res.json()).then(result => {\n      console.log(result); // console.log(newData?newData:\"\")\n\n      const newData = data.post.map(item => {\n        if (item._id == result._id) {\n          return result;\n        } else {\n          return item;\n        }\n      });\n      setData(newData);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const unlikePost = id => {\n    fetch('/unlike', {\n      method: 'put',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        postid: id\n      })\n    }).then(res => res.json()).then(result => {\n      console.log(result);\n      const newData = data.post.map(item => {\n        if (item._id == result._id) {\n          return result;\n        } else {\n          return item;\n        }\n      });\n      setData(newData);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const makecomment = (text, postid) => {\n    fetch('/comment', {\n      method: 'put',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        text,\n        postid\n      })\n    }).then(res => res.json()).then(result => {\n      console.log(result);\n      const newData = data.post.map(item => {\n        if (item._id == result._id) {\n          return result;\n        } else {\n          return item;\n        }\n      });\n      setData(newData);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const deletepost = postid => {\n    fetch(`/deletepost/${postid}`, {\n      method: 'delete',\n      headers: {\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      }\n    }).then(res => res.json()).then(result => {\n      console.log(result);\n      const newData = data.post.filter(item => {\n        return item._id !== result._id;\n      });\n      setData(newData);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const deletecomment = (commentId, postid) => {\n    fetch('/deletecomment', {\n      method: 'put',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        commentId,\n        postid\n      })\n    }).then(res => res.json()).then(result => {\n      console.log(result);\n      const newData = data.post.map(item => {\n        if (item._id == result._id) {\n          return result;\n        } else {\n          return item;\n        }\n      });\n      setData(newData);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  return data.post.map(item => {\n    return /*#__PURE__*/React.createElement(Card, {\n      className: classes.root,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(CardHeader, {\n      avatar: /*#__PURE__*/React.createElement(Avatar, {\n        src: item.postedby.pic,\n        \"aria-label\": \"recipe\",\n        className: classes.avatar,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 21\n        }\n      }),\n      action: item.postedby._id == state._id && /*#__PURE__*/React.createElement(Fab, {\n        color: \"secondary\",\n        \"aria-label\": \"edit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(DeleteIcon, {\n        onClick: () => deletepost(item._id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 17\n        }\n      })),\n      title: /*#__PURE__*/React.createElement(Link, {\n        to: item.postedby._id !== state._id ? \"/profile/\" + item.postedby._id : \"/profile\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 20\n        }\n      }, item.postedby.name),\n      subheader: item.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(CardMedia, {\n      className: classes.media,\n      image: item.photo,\n      title: \"Paella dish\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(CardActions, {\n      disableSpacing: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-label\": \"add to favorites\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FavoriteIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 15\n      }\n    })), item.likes.includes(state._id) ? /*#__PURE__*/React.createElement(ThumbDownIcon, {\n      onClick: () => unlikePost(item._id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 15\n      }\n    }) : /*#__PURE__*/React.createElement(ThumbUpIcon, {\n      onClick: () => likePost(item._id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-label\": \"share\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ShareIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(CardContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"body2\",\n      color: \"textSecondary\",\n      component: \"p\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 13\n      }\n    }, item.likes.length, \" likes\"), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"body2\",\n      color: \"textSecondary\",\n      component: \"p\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 13\n      }\n    }, item.body), item.comments.map(comment => {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 24\n        }\n      }, comment.postedby.name, \":\"), \" \", comment.text, \" \", /*#__PURE__*/React.createElement(DeleteIcon, {\n        onClick: () => deletecomment(comment._id, item._id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 77\n        }\n      }), \" \"));\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: event => {\n        event.preventDefault();\n        makecomment(event.target[0].value, item._id);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Enter your comments\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 15\n      }\n    }))));\n  });\n}","map":{"version":3,"sources":["F:/INSTAGRAM CLONE/client/src/components/screens/Card.js"],"names":["React","useState","useContext","useEffect","makeStyles","Card","CardHeader","CardMedia","CardContent","CardActions","Avatar","IconButton","Typography","red","FavoriteIcon","ShareIcon","ThumbUpIcon","ThumbDownIcon","UserContext","Fab","DeleteIcon","Link","useStyles","theme","root","maxWidth","margin","media","height","paddingTop","expand","transform","marginLeft","transition","transitions","create","duration","shortest","expandOpen","avatar","backgroundColor","size","RecipeReviewCard","data","setData","classes","expanded","setExpanded","state","dispatch","handleExpandClick","likePost","id","fetch","method","headers","localStorage","getItem","body","JSON","stringify","postid","then","res","json","result","console","log","newData","post","map","item","_id","catch","err","unlikePost","makecomment","text","deletepost","filter","deletecomment","commentId","postedby","pic","name","title","photo","likes","includes","length","comments","comment","event","preventDefault","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n// import clsx from 'clsx';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\n// import Collapse from '@material-ui/core/Collapse';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { red } from '@material-ui/core/colors';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport ShareIcon from '@material-ui/icons/Share';\r\n// import ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\n// import MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport ThumbUpIcon from '@material-ui/icons/ThumbUp';\r\nimport ThumbDownIcon from '@material-ui/icons/ThumbDown';\r\nimport { UserContext } from '../../App'\r\nimport Fab from '@material-ui/core/Fab';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { Link } from 'react-router-dom'\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    maxWidth: 345,\r\n    margin: \"26px auto\"\r\n  },\r\n  media: {\r\n    height: 0,\r\n    paddingTop: '56.25%', // 16:9\r\n  },\r\n  expand: {\r\n    transform: 'rotate(0deg)',\r\n    marginLeft: 'auto',\r\n    transition: theme.transitions.create('transform', {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    transform: 'rotate(180deg)',\r\n  },\r\n  avatar: {\r\n    backgroundColor: red[500],\r\n    size: \"small\"\r\n  },\r\n}));\r\n\r\nexport default function RecipeReviewCard() {\r\n  const [data, setData] = useState([])\r\n  \r\n  const classes = useStyles();\r\n  const [expanded, setExpanded] = React.useState(false);\r\n  // const [newData, setData] = useState(prop)\r\n  const { state, dispatch } = useContext(UserContext)\r\n  // console.log(prop)\r\n\r\n  const handleExpandClick = () => {\r\n    setExpanded(!expanded);\r\n  };\r\n  const likePost = (id) => {\r\n    fetch('/like', {\r\n      method: 'put',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n      },\r\n      body: JSON.stringify({\r\n        postid: id\r\n      })\r\n    }).then(res => res.json())\r\n      .then(result => {\r\n        console.log(result)\r\n        // console.log(newData?newData:\"\")\r\n        const newData = data.post.map(item => {\r\n          if (item._id == result._id) {\r\n            return result\r\n          } else {\r\n            return item\r\n          }\r\n        })\r\n        setData(newData)\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n  const unlikePost = (id) => {\r\n    fetch('/unlike', {\r\n      method: 'put',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n      },\r\n      body: JSON.stringify({\r\n        postid: id\r\n      })\r\n    }).then(res => res.json())\r\n      .then(result => {\r\n        console.log(result)\r\n        const newData = data.post.map(item => {\r\n          if (item._id == result._id) {\r\n            return result\r\n          } else {\r\n            return item\r\n          }\r\n        })\r\n        setData(newData)\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n  const makecomment = (text, postid) => {\r\n    fetch('/comment', {\r\n      method: 'put',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n      },\r\n      body: JSON.stringify({\r\n        text,\r\n        postid\r\n      })\r\n    }).then(res => res.json())\r\n      .then(result => {\r\n        console.log(result)\r\n        const newData = data.post.map(item => {\r\n          if (item._id == result._id) {\r\n            return result\r\n          } else {\r\n            return item\r\n          }\r\n        })\r\n        setData(newData)\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n  const deletepost = (postid) => {\r\n    fetch(`/deletepost/${postid}`, {\r\n      method: 'delete',\r\n      headers: {\r\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n      }\r\n    }).then(res => res.json())\r\n      .then(result => {\r\n        console.log(result)\r\n        const newData = data.post.filter(item => {\r\n          return item._id !== result._id\r\n        })\r\n        setData(newData)\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n  const deletecomment = (commentId, postid) => {\r\n    fetch('/deletecomment', {\r\n      method: 'put',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n      },\r\n      body: JSON.stringify({\r\n        commentId,\r\n        postid\r\n      })\r\n    }).then(res => res.json())\r\n      .then(result => {\r\n        console.log(result)\r\n        const newData = data.post.map(item => {\r\n          if (item._id == result._id) {\r\n            return result\r\n          } else {\r\n            return item\r\n          }\r\n        })\r\n        setData(newData)\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n  return (\r\n    data.post.map(item => {\r\n      return (\r\n        <Card className={classes.root}>\r\n          <CardHeader\r\n            avatar={<Avatar src={item.postedby.pic} aria-label=\"recipe\" className={classes.avatar} />\r\n            }\r\n            action={item.postedby._id == state._id &&\r\n              <Fab color=\"secondary\" aria-label=\"edit\">\r\n                <DeleteIcon onClick={() => deletepost(item._id)} />\r\n              </Fab>\r\n            }\r\n            title={<Link to={item.postedby._id !== state._id ? \"/profile/\" + item.postedby._id : \"/profile\"}>{item.postedby.name}</Link>}\r\n            subheader={item.title}\r\n          />\r\n          <CardMedia\r\n            className={classes.media}\r\n            image={item.photo}\r\n            title=\"Paella dish\"\r\n          />\r\n          <CardActions disableSpacing>\r\n            <IconButton aria-label=\"add to favorites\">\r\n              <FavoriteIcon />\r\n            </IconButton>\r\n            {item.likes.includes(state._id) ?\r\n              <ThumbDownIcon onClick={() => unlikePost(item._id)} /> :\r\n              <ThumbUpIcon onClick={() => likePost(item._id)} />\r\n            }\r\n            <IconButton aria-label=\"share\">\r\n              <ShareIcon />\r\n            </IconButton>\r\n          </CardActions>\r\n          <CardContent>\r\n            <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n              {item.likes.length} likes\r\n            </Typography>\r\n            <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n              {item.body}\r\n            </Typography>\r\n            {\r\n              item.comments.map(comment => {\r\n                return (\r\n                  <>\r\n                    <p><span>{comment.postedby.name}:</span> {comment.text} <DeleteIcon onClick={() => deletecomment(comment._id, item._id)} /> </p>\r\n                  </>\r\n                )\r\n              })\r\n            }\r\n            <form onSubmit={(event) => {\r\n              event.preventDefault()\r\n              makecomment(event.target[0].value, item._id)\r\n            }}>\r\n              <input type=\"text\" placeholder=\"Enter your comments\" />\r\n            </form>\r\n          </CardContent>\r\n        </Card>\r\n      )\r\n    })\r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}