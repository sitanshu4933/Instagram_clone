{"ast":null,"code":"var _jsxFileName = \"F:\\\\INSTAGRAM CLONE\\\\client\\\\src\\\\components\\\\screens\\\\Card.js\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles'; // import clsx from 'clsx';\n\nimport Card from '@material-ui/core/Card';\nimport CardHeader from '@material-ui/core/CardHeader';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions'; // import Collapse from '@material-ui/core/Collapse';\n\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport { red } from '@material-ui/core/colors';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport ShareIcon from '@material-ui/icons/Share'; // import ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n// import MoreVertIcon from '@material-ui/icons/MoreVert';\n\nimport ThumbUpIcon from '@material-ui/icons/ThumbUp';\nimport ThumbDownIcon from '@material-ui/icons/ThumbDown';\nimport { UserContext } from '../../App';\nimport Fab from '@material-ui/core/Fab';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { Link } from 'react-router-dom';\nconst [data, setData] = useState([]);\nuseEffect(() => {\n  fetch('/allpost', {\n    headers: {\n      \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n    }\n  }).then(res => res.json()).then(result => {\n    setData(result.posts); // console.log(result.posts)      \n  });\n}, []);\nconst useStyles = makeStyles(theme => ({\n  root: {\n    maxWidth: 345,\n    margin: \"26px auto\"\n  },\n  media: {\n    height: 0,\n    paddingTop: '56.25%' // 16:9\n\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    marginLeft: 'auto',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest\n    })\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)'\n  },\n  avatar: {\n    backgroundColor: red[500],\n    size: \"small\"\n  }\n}));\nexport default function RecipeReviewCard() {\n  const classes = useStyles();\n  const [expanded, setExpanded] = React.useState(false);\n  const [newData, setData] = useState(prop);\n  const {\n    state,\n    dispatch\n  } = useContext(UserContext);\n  console.log(prop);\n\n  const handleExpandClick = () => {\n    setExpanded(!expanded);\n  };\n\n  const likePost = id => {\n    fetch('/like', {\n      method: 'put',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        postid: id\n      })\n    }).then(res => res.json()).then(result => {\n      console.log(result); // console.log(newData?newData:\"\")\n\n      const newdata = prop.post.map(item => {\n        if (item._id == result._id) {\n          return result;\n        } else {\n          return item;\n        }\n      });\n      setData(newdata);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const unlikePost = id => {\n    fetch('/unlike', {\n      method: 'put',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        postid: id\n      })\n    }).then(res => res.json()).then(result => {\n      console.log(result);\n      const newData = prop.post.map(item => {\n        if (item._id == result._id) {\n          return result;\n        } else {\n          return item;\n        }\n      });\n      setData(newData);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const makecomment = (text, postid) => {\n    fetch('/comment', {\n      method: 'put',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        text,\n        postid\n      })\n    }).then(res => res.json()).then(result => {\n      console.log(result);\n      const newData = prop.post.map(item => {\n        if (item._id == result._id) {\n          return result;\n        } else {\n          return item;\n        }\n      });\n      setData(newData);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const deletepost = postid => {\n    fetch(`/deletepost/${postid}`, {\n      method: 'delete',\n      headers: {\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      }\n    }).then(res => res.json()).then(result => {\n      console.log(result);\n      const newData = prop.post.filter(item => {\n        return item._id !== result._id;\n      });\n      setData(newData);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  const deletecomment = (commentId, postid) => {\n    fetch('/deletecomment', {\n      method: 'put',\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        commentId,\n        postid\n      })\n    }).then(res => res.json()).then(result => {\n      console.log(result);\n      const newData = prop.post.map(item => {\n        if (item._id == result._id) {\n          return result;\n        } else {\n          return item;\n        }\n      });\n      setData(newData);\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  return prop.post.map(item => {\n    return /*#__PURE__*/React.createElement(Card, {\n      className: classes.root,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(CardHeader, {\n      avatar: /*#__PURE__*/React.createElement(Avatar, {\n        src: item.postedby.pic,\n        \"aria-label\": \"recipe\",\n        className: classes.avatar,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }\n      }),\n      action: item.postedby._id == state._id && /*#__PURE__*/React.createElement(Fab, {\n        color: \"secondary\",\n        \"aria-label\": \"edit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(DeleteIcon, {\n        onClick: () => deletepost(item._id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 17\n        }\n      })),\n      title: /*#__PURE__*/React.createElement(Link, {\n        to: item.postedby._id !== state._id ? \"/profile/\" + item.postedby._id : \"/profile\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 20\n        }\n      }, item.postedby.name),\n      subheader: item.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(CardMedia, {\n      className: classes.media,\n      image: item.photo,\n      title: \"Paella dish\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(CardActions, {\n      disableSpacing: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-label\": \"add to favorites\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(FavoriteIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 15\n      }\n    })), item.likes.includes(state._id) ? /*#__PURE__*/React.createElement(ThumbDownIcon, {\n      onClick: () => unlikePost(item._id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 15\n      }\n    }) : /*#__PURE__*/React.createElement(ThumbUpIcon, {\n      onClick: () => likePost(item._id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-label\": \"share\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ShareIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 15\n      }\n    }))), /*#__PURE__*/React.createElement(CardContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"body2\",\n      color: \"textSecondary\",\n      component: \"p\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 13\n      }\n    }, item.likes.length, \" likes\"), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"body2\",\n      color: \"textSecondary\",\n      component: \"p\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 13\n      }\n    }, item.body), item.comments.map(comment => {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 22\n        }\n      }, comment.postedby.name, \":\"), \" \", comment.text, \" \", /*#__PURE__*/React.createElement(DeleteIcon, {\n        onClick: () => deletecomment(comment._id, item._id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 75\n        }\n      }), \" \"));\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: event => {\n        event.preventDefault();\n        makecomment(event.target[0].value, item._id);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Enter your comments\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 15\n      }\n    }))));\n  });\n}","map":{"version":3,"sources":["F:/INSTAGRAM CLONE/client/src/components/screens/Card.js"],"names":["React","useState","useContext","useEffect","makeStyles","Card","CardHeader","CardMedia","CardContent","CardActions","Avatar","IconButton","Typography","red","FavoriteIcon","ShareIcon","ThumbUpIcon","ThumbDownIcon","UserContext","Fab","DeleteIcon","Link","data","setData","fetch","headers","localStorage","getItem","then","res","json","result","posts","useStyles","theme","root","maxWidth","margin","media","height","paddingTop","expand","transform","marginLeft","transition","transitions","create","duration","shortest","expandOpen","avatar","backgroundColor","size","RecipeReviewCard","classes","expanded","setExpanded","newData","prop","state","dispatch","console","log","handleExpandClick","likePost","id","method","body","JSON","stringify","postid","newdata","post","map","item","_id","catch","err","unlikePost","makecomment","text","deletepost","filter","deletecomment","commentId","postedby","pic","name","title","photo","likes","includes","length","comments","comment","event","preventDefault","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useContext,useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n// import clsx from 'clsx';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\n// import Collapse from '@material-ui/core/Collapse';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { red } from '@material-ui/core/colors';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport ShareIcon from '@material-ui/icons/Share';\r\n// import ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\n// import MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport ThumbUpIcon from '@material-ui/icons/ThumbUp';\r\nimport ThumbDownIcon from '@material-ui/icons/ThumbDown';\r\nimport { UserContext } from '../../App'\r\nimport Fab from '@material-ui/core/Fab';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport {Link} from 'react-router-dom'\r\nconst [data, setData] = useState([])\r\n\r\n  useEffect(() => {\r\n    fetch('/allpost', {\r\n      headers: {\r\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n      }\r\n    }).then(res=>res.json())\r\n    .then(result=>{\r\n      setData(result.posts)\r\n      // console.log(result.posts)      \r\n    })\r\n  }, [])\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    maxWidth: 345,\r\n    margin: \"26px auto\"\r\n  },\r\n  media: {\r\n    height: 0,\r\n    paddingTop: '56.25%', // 16:9\r\n  },\r\n  expand: {\r\n    transform: 'rotate(0deg)',\r\n    marginLeft: 'auto',\r\n    transition: theme.transitions.create('transform', {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    transform: 'rotate(180deg)',\r\n  },\r\n  avatar: {\r\n    backgroundColor: red[500],\r\n    size: \"small\"\r\n  },\r\n}));\r\n\r\nexport default function RecipeReviewCard() {\r\n  const classes = useStyles();\r\n  const [expanded, setExpanded] = React.useState(false);\r\n  const [newData, setData] = useState(prop)\r\n  const { state, dispatch } = useContext(UserContext)\r\n  console.log(prop)\r\n\r\n  const handleExpandClick = () => {\r\n    setExpanded(!expanded);\r\n  };\r\n  const likePost = (id) => {\r\n    fetch('/like', {\r\n      method: 'put',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n      },\r\n      body: JSON.stringify({\r\n        postid: id\r\n      })\r\n    }).then(res => res.json())\r\n      .then(result => {\r\n        console.log(result)\r\n        // console.log(newData?newData:\"\")\r\n        const newdata = prop.post.map(item => {\r\n          if (item._id == result._id) {\r\n            return result\r\n          } else {\r\n            return item\r\n          }\r\n        })\r\n        setData(newdata)\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n  const unlikePost = (id) => {\r\n    fetch('/unlike', {\r\n      method: 'put',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n      },\r\n      body: JSON.stringify({\r\n        postid: id\r\n      })\r\n    }).then(res => res.json())\r\n      .then(result => {\r\n        console.log(result)\r\n        const newData = prop.post.map(item => {\r\n          if (item._id == result._id) {\r\n            return result\r\n          } else {\r\n            return item\r\n          }\r\n        })\r\n        setData(newData)\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n  const makecomment = (text, postid) => {\r\n    fetch('/comment', {\r\n      method: 'put',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n      },\r\n      body: JSON.stringify({\r\n        text,\r\n        postid\r\n      })\r\n    }).then(res => res.json())\r\n      .then(result => {\r\n        console.log(result)\r\n        const newData = prop.post.map(item => {\r\n          if (item._id == result._id) {\r\n            return result\r\n          } else {\r\n            return item\r\n          }\r\n        })\r\n        setData(newData)\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n  const deletepost = (postid) => {\r\n    fetch(`/deletepost/${postid}`, {\r\n      method: 'delete',\r\n      headers: {\r\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n      }\r\n    }).then(res => res.json())\r\n      .then(result => {\r\n        console.log(result)\r\n        const newData = prop.post.filter(item => {\r\n         return item._id !== result._id\r\n        })\r\n        setData(newData)\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n  const deletecomment = (commentId, postid) => {\r\n    fetch('/deletecomment', {\r\n      method: 'put',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Authorization\": \"Bearer \" + localStorage.getItem(\"jwt\")\r\n      },\r\n      body: JSON.stringify({\r\n        commentId,\r\n        postid\r\n      })\r\n    }).then(res => res.json())\r\n      .then(result => {\r\n        console.log(result)\r\n        const newData = prop.post.map(item => {\r\n          if (item._id == result._id) {\r\n            return result\r\n          } else {\r\n            return item\r\n          }\r\n        })\r\n        setData(newData)\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n  }\r\n  return (\r\n    prop.post.map(item => {\r\n      return (\r\n        <Card className={classes.root}>\r\n          <CardHeader\r\n            avatar={<Avatar src={item.postedby.pic} aria-label=\"recipe\" className={classes.avatar} />\r\n            }\r\n            action={item.postedby._id == state._id &&\r\n              <Fab color=\"secondary\" aria-label=\"edit\">\r\n                <DeleteIcon onClick={()=>deletepost(item._id)} />\r\n              </Fab>\r\n            }\r\n            title={<Link to={item.postedby._id !== state._id ?\"/profile/\"+item.postedby._id:\"/profile\"}>{item.postedby.name}</Link>}\r\n            subheader={item.title}\r\n          />\r\n          <CardMedia\r\n            className={classes.media}\r\n            image={item.photo}\r\n            title=\"Paella dish\"\r\n          />\r\n          <CardActions disableSpacing>\r\n            <IconButton aria-label=\"add to favorites\">\r\n              <FavoriteIcon />\r\n            </IconButton>\r\n            {item.likes.includes(state._id) ?\r\n              <ThumbDownIcon onClick={() => unlikePost(item._id)} /> :\r\n              <ThumbUpIcon onClick={() => likePost(item._id)} />\r\n            }\r\n            <IconButton aria-label=\"share\">\r\n              <ShareIcon />\r\n            </IconButton>\r\n          </CardActions>\r\n          <CardContent>\r\n            <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n              {item.likes.length} likes\r\n            </Typography>\r\n            <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\r\n              {item.body}\r\n            </Typography>\r\n            {\r\n              item.comments.map(comment => {\r\n                return (\r\n                  <>\r\n                  <p><span>{comment.postedby.name}:</span> {comment.text} <DeleteIcon onClick={()=>deletecomment(comment._id,item._id)}/> </p>\r\n                  </>\r\n                )\r\n              })\r\n            }\r\n            <form onSubmit={(event) => {\r\n              event.preventDefault()\r\n              makecomment(event.target[0].value, item._id)\r\n            }}>\r\n              <input type=\"text\" placeholder=\"Enter your comments\" />\r\n            </form>\r\n          </CardContent>\r\n        </Card>\r\n      )\r\n    })\r\n  )\r\n}"]},"metadata":{},"sourceType":"module"}